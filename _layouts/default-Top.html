<!doctype html>
<html lang="ja">
  <head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1.0"/>
    <title>{{ page.title | default: site.title }}</title>
    <meta name="keywords" content="高知,橘浦,漁協,大月,海,漁業,自然,海,ダイビング,地域活動">
    <meta name="description" content="{{ page.description | default: site.description }}">
    <meta name="google-site-verification" content="irQwFqSHgTPreTD6VXArokwhQHYKhn3wJidM8mJB8J0" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="preload" href="{{ '/img/Top2.webp' | relative_url }}" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="{{ '/styles.css' | relative_url }}">
    <style id="style">{% include style.html %}</style>
  </head>
  <body class="bg-slate-50 text-slate-800">
    {% include backimage.html %}
    {% include header.html %}
    {{ content }}
    {% include footer-Top.html %}
  </body>  
  <script type="text/javascript">
    document.getElementById("pp-date").innerHTML = showDay(); function showDay() {var now = new Date(); var day = now.toLocaleDateString('ja-JP-u-ca-japanese', {dateStyle: 'long'}); return day;}
  </script>
  <script type="text/javascript">
    document.getElementById("pp-year").innerHTML = showYear(); function showYear() {var now = new Date(); var year = now.getFullYear(); return year;}
  </script>

  <script>
  (async () => {
    const ul = document.getElementById('newsList');
    try {
      const res = await fetch('news.json', { cache: 'no-store' });
      if (!res.ok) throw new Error('no json');
      const items = await res.json();
      if (!Array.isArray(items) || items.length === 0) throw new Error('empty');
      ul.innerHTML = '';
      for (const it of items) {
        const li = document.createElement('li');
        li.className = 'py-3 flex items-start gap-4';
        const t = document.createElement('time');
        t.className = 'shrink-0 w-24 text-sm text-slate-500';
        const d = String(it.date || '').replaceAll('-', '/');
        t.textContent = d || '';
        const box = document.createElement('div');
        const title = document.createElement('p');
        title.className = 'font-medium';
        title.textContent = it.title || '';
        const body = document.createElement('p');
        body.className = 'text-sm text-slate-600';
        body.textContent = it.body || '';
        box.appendChild(title);
        if ((it.body||'').trim()) box.appendChild(body);
        li.appendChild(t); li.appendChild(box);
        ul.appendChild(li);
      }
    } catch (e) {
      const tpl = document.getElementById('news-fallback');
      if (tpl) ul.appendChild(tpl.content.cloneNode(true));
    }
  })();
  </script>

</html>
